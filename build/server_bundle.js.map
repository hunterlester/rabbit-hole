{"version":3,"sources":["webpack:///webpack/bootstrap f8acd5bf9e01ea1a342e","webpack:///./server/index.js","webpack:///./server/app.js","webpack:///external \"express\"","webpack:///external \"path\"","webpack:///external \"serve-favicon\"","webpack:///external \"body-parser\"","webpack:///external \"mongoose\"","webpack:///external \"passport\"","webpack:///external \"dotenv\"","webpack:///./~/dotenv/config.js","webpack:///./~/dotenv/lib/main.js","webpack:///external \"fs\"","webpack:///./server/models/user.js","webpack:///external \"crypto\"","webpack:///external \"jsonwebtoken\"","webpack:///./server/models/studymap.js","webpack:///./server/models/link.js","webpack:///./server/models/breadcrumb.js","webpack:///./server/models/message.js","webpack:///./server/models/echo.js","webpack:///./server/config/passport.js","webpack:///external \"passport-local\"","webpack:///./server/routes/index.js","webpack:///./server/routes/users.js","webpack:///external \"express-jwt\"","webpack:///./server/routes/studymaps.js","webpack:///./server/state/action_creators.js","webpack:///./server/routes/messages.js","webpack:///./server/routes/links.js","webpack:///./server/routes/breadcrumbs.js","webpack:///./server/routes/echoes.js","webpack:///external \"http\"","webpack:///external \"debug\"","webpack:///./server/state/store.js","webpack:///external \"redux\"","webpack:///external \"redux-thunk\"","webpack:///./server/state/reducer.js","webpack:///./server/state/core.js","webpack:///external \"immutable\"","webpack:///external \"socket.io\""],"names":[],"mappings":"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","file":"server_bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f8acd5bf9e01ea1a342e\n **/","import app from './app';\nimport http from 'http';\nimport debugGet from 'debug';\nconst debug = debugGet('rabbit-hole:server');\nimport makeStore from './state/store';\nimport Server from 'socket.io';\nimport mongoose from 'mongoose';\nconst Echo = mongoose.model('Echo');\n\nlet port = normalizePort(process.env.PORT || '3000');\n\napp.set('port', port);\n\nexport const store = makeStore();\n\nconst server = http.createServer(app);\n\nfunction startSocketServer(store) {\n  const io = new Server().attach(3001);\n\n  store.subscribe(\n    () => io.emit('state', store.getState().toJS())\n  )\n\n  io.on('connection', (socket) => {\n    socket.emit('state', store.getState().toJS());\n    socket.on('action', store.dispatch.bind(store));\n  })\n}\n\nstartSocketServer(store);\n\nlet promise = new Promise((fulfill, reject) => {\n  fulfill(\n    Echo.find().populate('studymap breadcrumb link message').exec((err, echoes) => {\n      if (err) throw error\n      return echoes;\n    })\n  );\n});\n\npromise.then((res) => {\n\n  store.dispatch({\n    type: 'SET_ECHOES',\n    echoes: res\n  });\n})\n\n\nserver.listen(port);\nserver.on('error', onError);\nserver.on('listening', onListening);\n\nfunction normalizePort(val) {\n  const port = parseInt(val, 10);\n\n  if (isNaN(port)) {\n    return val;\n  }\n\n  if (port >= 0) {\n    return port;\n  }\n\n  return false;\n}\n\nfunction onError(error) {\n  if (error.syscall !== 'listen') {\n    throw error;\n  }\n\n  const bind = typeof port === 'string'\n    ? 'Pipe ' + port\n    : 'Port ' + port;\n\n  switch (error.code) {\n    case 'EACCES':\n      console.error(bind + ' requires elevated privileges');\n      process.exit(1);\n      break;\n    case 'EADDRINUSE':\n      console.error(bind + ' is already in use');\n      process.exit(1);\n      break;\n    default:\n      throw error;\n  }\n}\n\nfunction onListening() {\n  const addr = server.address();\n  const bind = typeof addr === 'string'\n    ? 'pipe ' + addr\n    : 'port ' + addr.port;\n  debug('Listening on ' + bind);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/index.js\n **/","import express from 'express';\nconst app = express();\nimport path from 'path';\nimport favicon from 'serve-favicon';\nimport bodyParser from 'body-parser';\nimport mongoose from 'mongoose';\nimport passport from 'passport';\nimport dotenv from 'dotenv';\nimport 'dotenv/config';\n\n\n// mlab uri\nmongoose.connect(process.env.MONGO_URI);\n\n// Docker Machine host ip\n// mongoose.connect('mongodb://192.168.99.100:27017/data/db');\n\n// network bridge\n// mongoose.connect('mongodb://172.18.0.2:27017/data/db');\n\n\n// DATA MODELS\n//\n//\nimport './models/user';\nimport './models/studymap';\nimport './models/link';\nimport './models/breadcrumb';\nimport './models/message';\nimport './models/echo';\n\n// PASSPORT CONFIGURATION\n//\n//\nimport './config/passport';\n\n// API ROUTES\n//\n//\nimport routes from './routes/index';\nimport users from './routes/users';\nimport studymaps from './routes/studymaps';\nimport messages from './routes/messages';\nimport links from './routes/links';\nimport breadcrumbs from './routes/breadcrumbs';\nimport echoes from './routes/echoes';\n\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'ejs');\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(express.static(path.join(__dirname, 'public')));\napp.use(passport.initialize());\n\napp.use('/', routes);\napp.use('/studymaps', studymaps);\napp.use('/users', users);\napp.use('/messages', messages);\napp.use('/links', links);\napp.use('/breadcrumbs', breadcrumbs);\napp.use('/echoes', echoes);\n\n// catch 404 and forward to error handler\napp.use(function(req, res, next) {\n  var err = new Error('Not Found');\n  err.status = 404;\n  next(err);\n});\n\n// error handlers\n\n// development error handler\n// will print stacktrace\nif (app.get('env') === 'development') {\n  app.use(function(err, req, res, next) {\n    res.status(err.status || 500);\n    res.render('error', {\n      message: err.message,\n      error: err\n    });\n  });\n}\n\n// production error handler\n// no stacktraces leaked to user\napp.use(function(err, req, res, next) {\n  console.log(err);\n  res.status(err.status || 500);\n  res.render('error', {\n    message: err.message,\n    error: {}\n  });\n});\n\n\nexport default app;\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/app.js\n **/","module.exports = require(\"express\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"serve-favicon\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"serve-favicon\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = require(\"body-parser\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"body-parser\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"mongoose\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mongoose\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = require(\"passport\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport\"\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = require(\"dotenv\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"dotenv\"\n ** module id = 9\n ** module chunks = 0\n **/","(function () {\n  var options = {}\n  process.argv.forEach(function (val, idx, arr) {\n    var matches = val.match(/^dotenv_config_(.+)=(.+)/)\n    if (matches) {\n      options[matches[1]] = matches[2]\n    }\n  })\n\n  require('./lib/main').config(options)\n})()\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/dotenv/config.js\n ** module id = 10\n ** module chunks = 0\n **/","'use strict'\n\nvar fs = require('fs')\n\nmodule.exports = {\n  /*\n   * Main entry point into dotenv. Allows configuration before loading .env\n   * @param {Object} options - valid options: path ('.env'), encoding ('utf8')\n   * @returns {Boolean}\n  */\n  config: function (options) {\n    var path = '.env'\n    var encoding = 'utf8'\n    var silent = false\n\n    if (options) {\n      if (options.silent) {\n        silent = options.silent\n      }\n      if (options.path) {\n        path = options.path\n      }\n      if (options.encoding) {\n        encoding = options.encoding\n      }\n    }\n\n    try {\n      // specifying an encoding returns a string instead of a buffer\n      var parsedObj = this.parse(fs.readFileSync(path, { encoding: encoding }))\n\n      Object.keys(parsedObj).forEach(function (key) {\n        process.env[key] = process.env[key] || parsedObj[key]\n      })\n\n      return parsedObj\n    } catch (e) {\n      if (!silent) {\n        console.error(e)\n      }\n      return false\n    }\n  },\n\n  /*\n   * Parses a string or buffer into an object\n   * @param {String|Buffer} src - source to be parsed\n   * @returns {Object}\n  */\n  parse: function (src) {\n    var obj = {}\n\n    // convert Buffers before splitting into lines and processing\n    src.toString().split('\\n').forEach(function (line) {\n      // matching \"KEY' and 'VAL' in 'KEY=VAL'\n      var keyValueArr = line.match(/^\\s*([\\w\\.\\-]+)\\s*=\\s*(.*)?\\s*$/)\n      // matched?\n      if (keyValueArr != null) {\n        var key = keyValueArr[1]\n\n        // default undefined or missing values to empty string\n        var value = keyValueArr[2] ? keyValueArr[2] : ''\n\n        // expand newlines in quoted values\n        var len = value ? value.length : 0\n        if (len > 0 && value.charAt(0) === '\\\"' && value.charAt(len - 1) === '\\\"') {\n          value = value.replace(/\\\\n/gm, '\\n')\n        }\n\n        // remove any surrounding quotes and extra spaces\n        value = value.replace(/(^['\"]|['\"]$)/g, '').trim()\n\n        obj[key] = value\n      }\n    })\n\n    return obj\n  }\n\n}\n\nmodule.exports.load = module.exports.config\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/dotenv/lib/main.js\n ** module id = 11\n ** module chunks = 0\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 12\n ** module chunks = 0\n **/","import mongoose from 'mongoose';\nimport crypto from 'crypto';\nimport jwt from 'jsonwebtoken';\n\nconst UserSchema = new mongoose.Schema({\n  date: {type: Date, default: Date.now},\n  provider: String,\n  id: String,\n  displayName: String,\n  name: {\n    familyName: String,\n    givenName: String,\n    middleName: String\n  },\n  username: String,\n  salt: String,\n  hash: String,\n  breadcrumbs: [{type: mongoose.Schema.Types.ObjectId, ref: 'Breadcrumbs'}],\n  study_maps: [{type: mongoose.Schema.Types.ObjectId, ref: 'StudyMap'}],\n  points: Number\n}, {strict: false});\n\nUserSchema.methods.validPassword = function (password) {\n  const hash = crypto.pbkdf2Sync(password, this.salt, 1000, 64).toString('hex');\n\n  return this.hash === hash;\n};\n\nUserSchema.methods.setPassword = function(password) {\n  this.salt = crypto.randomBytes(16).toString('hex');\n  this.hash = crypto.pbkdf2Sync(password, this.salt, 1000, 64).toString('hex');\n};\n\nUserSchema.methods.generateJWT = function () {\n  const today = new Date;\n  const exp = new Date(today);\n  exp.setDate(today.getDate() + 60);\n\n  return jwt.sign({\n    _id: this._id,\n    username: this.username,\n    exp: parseInt(exp.getTime() / 1000)\n  }, process.env.JWT_TOKEN);\n};\n\nmongoose.model('User', UserSchema);\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/models/user.js\n **/","module.exports = require(\"crypto\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"crypto\"\n ** module id = 14\n ** module chunks = 0\n **/","module.exports = require(\"jsonwebtoken\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jsonwebtoken\"\n ** module id = 15\n ** module chunks = 0\n **/","import mongoose from 'mongoose';\n\nconst StudyMapSchema = new mongoose.Schema({\n  subject: String,\n  keywords: [],\n  date: {type: Date, default: Date.now},\n  user: {type: mongoose.Schema.Types.ObjectId, ref: 'User'},\n  breadcrumbs: [{type: mongoose.Schema.Types.ObjectId, ref: 'Breadcrumb'}],\n  links: [{type: mongoose.Schema.Types.ObjectId, ref: 'Link'}]\n}, {strict: false});\n\nmongoose.model('StudyMap', StudyMapSchema);\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/models/studymap.js\n **/","import mongoose from 'mongoose';\n\nconst LinkSchema = new mongoose.Schema({\n  date: {type: Date, default: Date.now},\n  title: String,\n  uri: String,\n  user: {type: mongoose.Schema.Types.ObjectId, ref: 'User'},\n  study_map: {type: mongoose.Schema.Types.ObjectId, ref: 'StudyMap'},\n  breadcrumbs: [{type: mongoose.Schema.Types.ObjectId, ref: 'Breadcrumb'}],\n  links: [{type: mongoose.Schema.Types.ObjectId, ref: 'Link'}],\n  upvote: Number\n}, {strict: false});\n\nmongoose.model('Link', LinkSchema);\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/models/link.js\n **/","import mongoose from 'mongoose';\n\nconst BreadcrumbSchema = new mongoose.Schema({\n  user: {type: mongoose.Schema.Types.ObjectId, ref: 'User'},\n  link: {type: mongoose.Schema.Types.ObjectId, ref: 'Link'},\n  study_map: {type: mongoose.Schema.Types.ObjectId, ref: 'StudyMap'},\n  content: String,\n  keywords: [],\n  messages: [{type: mongoose.Schema.Types.ObjectId, ref: 'Message'}],\n  date: {type: Date, default: Date.now},\n  upvote: Number\n}, {strict: false});\n\nmongoose.model('Breadcrumb', BreadcrumbSchema);\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/models/breadcrumb.js\n **/","import mongoose from 'mongoose';\n\nconst MessageSchema = new mongoose.Schema({\n  user: {type: mongoose.Schema.Types.ObjectId, ref: 'User'},\n  link: {type: mongoose.Schema.Types.ObjectId, ref: 'Link'},\n  study_map: {type: mongoose.Schema.Types.ObjectId, ref: 'StudyMap'},\n  breadcrumb: {type: mongoose.Schema.Types.ObjectId, ref: 'Breadcrumb'},\n  body: String,\n  upvote: Number\n});\n\nmongoose.model('Message', MessageSchema);\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/models/message.js\n **/","import mongoose from 'mongoose';\n\nconst EchoSchema = new mongoose.Schema({\n  date: {type: Date, default: Date.now},\n  user: {type: mongoose.Schema.Types.ObjectId, ref: 'User'},\n  studymap: {type: mongoose.Schema.Types.ObjectId, ref: 'StudyMap'},\n  breadcrumb: {type: mongoose.Schema.Types.ObjectId, ref: 'Breadcrumb'},\n  link: {type: mongoose.Schema.Types.ObjectId, ref: 'Link'},\n  message: {type: mongoose.Schema.Types.ObjectId, ref: 'Message'}\n}, {strict: false});\n\nmongoose.model('Echo', EchoSchema);\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/models/echo.js\n **/","import passport from 'passport';\nimport passportLocal from 'passport-local';\nconst LocalStrategy = passportLocal.Strategy;\nimport mongoose from 'mongoose';\nconst User = mongoose.model('User');\nconst StudyMap = mongoose.model('StudyMap');\n\npassport.use(new LocalStrategy(\n  function(username, password, done) {\n    User.findOne({username: username}).populate(\n      {path: 'study_maps', populate: [\n        {\n          path: 'links',\n          populate: {\n            path: 'breadcrumbs',\n            populate: {\n              path: 'messages',\n              populate: {\n                path:\n                  'user'\n                }}}\n        },\n        {\n          path: 'breadcrumbs',\n          populate: {\n            path: 'messages',\n            populate: {\n              path: 'user'\n            }}}]\n      }\n    ).exec(\n      (err, user) => {\n        if (err) {\n          return done(err);\n        }\n        if (!user) {\n          return done(null, false, {message: 'Incorrect username'});\n        }\n        if (!user.validPassword(password)) {\n          return done(null, false, {message: 'Incorrect password'});\n        }\n        return done(null, user);\n      }\n    );\n  }\n));\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/config/passport.js\n **/","module.exports = require(\"passport-local\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport-local\"\n ** module id = 22\n ** module chunks = 0\n **/","import express from 'express';\nconst router = express.Router();\n\nrouter.get('/', (req, res) => {\n  res.render('index');\n});\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/routes/index.js\n **/","import express from 'express';\nconst router = express.Router();\nimport passport from 'passport';\nimport mongoose from 'mongoose';\nconst User = mongoose.model('User');\n\nimport jwt from 'express-jwt';\nconst auth = jwt({secret: process.env.JWT_TOKEN, userProperty: 'payload'});\n\nrouter.get('/', auth, (req, res) => {\n  User.find((err, users) => {\n    if (err) return res.sendStatus(404);\n    res.json(users);\n  })\n});\n\nrouter.post('/register', (req, res, next) => {\n  if (!req.body.username || !req.body.password) {\n    return res.status(400).json({message: 'Please fill out all fields'});\n  }\n\n  const user = new User;\n\n  user.username = req.body.username;\n  user.setPassword(req.body.password);\n  user.given_name = req.body.given_name;\n  user.surname = req.body.surname;\n\n  user.save((err, user) => {\n    if (err) {\n      return next(err);\n    }\n    return res.json({\n      username: user.username,\n      _id: user._id,\n      token: user.generateJWT(),\n      study_maps: user.study_maps\n    })\n  });\n});\n\nrouter.post('/login', (req, res, next) => {\n  if (!req.body.username || !req.body.password) {\n    return res.status(400).json({message: 'Please fill out all fields.'});\n  }\n\n  passport.authenticate('local', (err, user, info) => {\n    if (err) {return next(err)}\n\n\n    if (user) {\n      return res.json({\n        username: user.username,\n        _id: user._id,\n        token: user.generateJWT(),\n        study_maps: user.study_maps\n      });\n    } else {\n      return res. status(401).json(info);\n    }\n  })(req, res, next);\n});\n\nrouter.param('userId', (req, res, next, userId) => {\n  User.findById(userId).populate('study_maps').exec((err, user) => {\n    if (err) return res.sendStatus(404);\n    req.user = user;\n    next();\n  });\n});\n\nrouter.get('/:userId', auth, (req, res) => {\n  res.json(req.user);\n});\n\nrouter.put('/:userId', auth, (req, res) => {\n  req.user.update({$set: req.body}, (err) => {\n    if (err) return res.status(400).json(err);\n    res.sendStatus(200);\n  })\n});\n\nrouter.delete('/:userId', auth, (req, res) => {\n  req.user.remove((err) => {\n    if (err) return res.status(400).json(err);\n    res.sendStatus(200);\n  });\n});\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/routes/users.js\n **/","module.exports = require(\"express-jwt\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express-jwt\"\n ** module id = 25\n ** module chunks = 0\n **/","import express from 'express';\nconst router = express.Router();\nimport mongoose from 'mongoose';\nconst StudyMap = mongoose.model('StudyMap');\nconst User = mongoose.model('User');\nconst Echo = mongoose.model('Echo');\nimport {store} from '../index';\nimport {postEcho} from '../state/action_creators';\n\nimport jwt from 'express-jwt';\nconst auth = jwt({secret: process.env.JWT_TOKEN, userProperty: 'payload'});\n\nrouter.post('/', auth, (req, res) => {\n  const studymap = new StudyMap(req.body);\n  studymap.save((err, studymap) => {\n    if (err) return res.sendStatus(500);\n    User.findById(studymap.user, (err, user) => {\n      if (err) return res.sendStatus(404);\n      user.study_maps.push(studymap._id);\n      user.save((err) => {\n        if (err) return res.sendStatus(500);\n        var echo = new Echo();\n        echo.user = studymap.user;\n        echo.studymap = studymap._id;\n        echo.save((err, echo) => {\n          if (err) return res.status(500).json(err);\n          store.dispatch(postEcho(echo));\n          res.json(studymap);\n        });\n      });\n    });\n  });\n});\n\nrouter.param('studymapId', (req, res, next, studymapId) => {\n  StudyMap.findById(studymapId).populate(\n    {path: 'breadcrumbs', populate: { path: 'messages' }}\n  ).exec( (err, studymap) => {\n    if (err) return res.sendStatus(404);\n    req.studymap = studymap;\n    next();\n  });\n});\n\nrouter.get('/:studymapId', auth, (req, res) => {\n  res.json(req.studymap);\n});\n\nrouter.put('/:studymapId', auth, (req, res) => {\n  req.studymap.update({$set: req.body}, (err) => {\n      if (err) return res.status(400).json(err);\n      res.sendStatus(200);\n  });\n});\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/routes/studymaps.js\n **/","export function postEcho(echo) {\n  return {\n    type: 'POST_ECHO',\n    echo\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/state/action_creators.js\n **/","import express from 'express';\nconst router = express.Router();\nimport mongoose from 'mongoose';\nconst Breadcrumb = mongoose.model('Breadcrumb');\nconst Message = mongoose.model('Message');\nconst Echo = mongoose.model('Echo');\n\nimport jwt from 'express-jwt';\nconst auth = jwt({secret: process.env.JWT_TOKEN, userProperty: 'payload'});\n\nrouter.post('/', auth, (req, res) => {\n  const message = new Message(req.body);\n  message.save((err, message) => {\n    if (err) return res.sendStatus(500);\n    Breadcrumb.findById(message.breadcrumb, (err, breadcrumb) => {\n      if (err) return res.sendStatus(404);\n      breadcrumb.messages.push(message._id);\n      breadcrumb.save((err) => {\n        if (err) return res.sendStatus(500);\n        var echo = new Echo();\n        echo.user = message.user;\n        echo.message = message._id;\n        echo.save((err, echo) => {\n          if (err) return res.status(500).json(err);\n          res.json(message);\n        });\n      });\n    });\n  });\n});\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/routes/messages.js\n **/","import express from 'express';\nconst router = express.Router();\nimport mongoose from 'mongoose';\nconst StudyMap = mongoose.model('StudyMap');\nconst Link = mongoose.model('Link');\nconst Echo = mongoose.model('Echo');\n\nimport jwt from 'express-jwt';\nconst auth = jwt({secret: process.env.JWT_TOKEN, userProperty: 'payload'});\n\nrouter.post('/studymap', auth, (req, res) => {\n  const link = new Link(req.body);\n  link.save((err, link) => {\n    if (err) return res.sendStatus(500);\n    StudyMap.findById(link.study_map, (err, studymap) => {\n      if (err) return res.sendStatus(404);\n      studymap.links.push(link._id);\n      studymap.save((err) => {\n        if (err) return res.sendStatus(500);\n        var echo = new Echo();\n        echo.user = link.user;\n        echo.link = link._id;\n        echo.save((err, echo) => {\n          if (err) return res.status(500).json(err);\n          res.json(link);\n        });\n      });\n    });\n  });\n});\n\nrouter.param('linkId', (req, res, next, linkId) => {\n  Link.findById(linkId, (err, link) => {\n    if (err) return res.sendStatus(404);\n    req.link = link;\n    next();\n  });\n});\n\nrouter.post('/:linkId/linktolink', auth, (req, res) => {\n  const sublink = new Link(req.body);\n  sublink.save((err, sublink) => {\n    if (err) return res.sendStatus(500);\n    req.link.links.push(sublink._id);\n    req.link.save((err) => {\n      if (err) res.status(500).json(err);\n      res.json(sublink);\n    });\n  });\n});\n\nrouter.put('/:linkId', auth, (req, res) => {\n  req.link.update({$set: req.body}, (err) => {\n      if (err) return res.status(400).json(err);\n      res.sendStatus(200);\n  });\n});\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/routes/links.js\n **/","import express from 'express';\nconst router = express.Router();\nimport mongoose from 'mongoose';\nconst StudyMap = mongoose.model('StudyMap');\nconst User = mongoose.model('User');\nconst Breadcrumb = mongoose.model('Breadcrumb');\nconst Link = mongoose.model('Link');\nconst Echo = mongoose.model('Echo');\n\nimport jwt from 'express-jwt';\nconst auth = jwt({secret: process.env.JWT_TOKEN, userProperty: 'payload'});\n\nrouter.post('/studymap', auth, (req, res) => {\n  const breadcrumb = new Breadcrumb(req.body);\n  breadcrumb.save((err, breadcrumb) => {\n    if (err) return res.sendStatus(500);\n    StudyMap.findById(breadcrumb.study_map, (err, studymap) => {\n      if (err) return res.sendStatus(404);\n      studymap.breadcrumbs.push(breadcrumb._id);\n      studymap.save((err, studymap) => {\n        if (err) return res.sendStatus(500);\n        var echo = new Echo();\n        echo.user = breadcrumb.user;\n        echo.breadcrumb = breadcrumb._id;\n        echo.save((err, echo) => {\n          if (err) return res.status(500).json(err);\n          res.json(breadcrumb);\n        });\n      });\n    });\n  });\n});\n\nrouter.post('/link', auth, (req, res) => {\n  const breadcrumb = new Breadcrumb(req.body);\n  breadcrumb.save((err, breadcrumb) => {\n    if (err) return res.sendStatus(500);\n    Link.findById(breadcrumb.link, (err, link) => {\n      if (err) return res.sendStatus(404);\n      link.breadcrumbs.push(breadcrumb._id);\n      link.save((err) => {\n        if (err) return res.sendStatus(500);\n        var echo = new Echo();\n        echo.user = breadcrumb.user;\n        echo.breadcrumb = breadcrumb._id;\n        echo.save((err, echo) => {\n          if (err) return res.status(500).json(err);\n          res.json(breadcrumb);\n        });\n      });\n    });\n  });\n});\n\nrouter.param('breadcrumbId', (req, res, next, breadcrumbId) => {\n  StudyMap.findById(breadcrumbId, (err, breadcrumb) => {\n    if (err) return res.sendStatus(404);\n    req.breadcrumb = breadcrumb;\n    next();\n  });\n});\n\nrouter.put('/:breadcrumbId', auth, (req, res) => {\n  res.breadcrumb.update({$set: req.body}, (err) => {\n      if (err) return res.status(400).json(err);\n      res.sendStatus(200);\n  });\n});\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/routes/breadcrumbs.js\n **/","import express from 'express';\nconst router = express.Router();\nimport mongoose from 'mongoose';\nconst Echo = mongoose.model('Echo');\n\nimport jwt from 'express-jwt';\nconst auth = jwt({secret: process.env.JWT_TOKEN, userProperty: 'payload'});\n\nrouter.get('/', (req, res) => {\n  Echo.find().populate('studymap breadcrumb link message').exec((err, echoes) => {\n    if (err) return res.status(404).json(err);\n    res.json(echoes);\n  });\n});\n\nexport default router;\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/routes/echoes.js\n **/","module.exports = require(\"http\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"http\"\n ** module id = 32\n ** module chunks = 0\n **/","module.exports = require(\"debug\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"debug\"\n ** module id = 33\n ** module chunks = 0\n **/","import {createStore, applyMiddleware} from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport reducer from './reducer';\n\nexport default function makeStore() {\n  return createStore(reducer);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/state/store.js\n **/","module.exports = require(\"redux\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux\"\n ** module id = 35\n ** module chunks = 0\n **/","module.exports = require(\"redux-thunk\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux-thunk\"\n ** module id = 36\n ** module chunks = 0\n **/","import {setEchoes, postEcho} from './core';\nimport { initialState } from './core';\n\nexport default function reducer(state = initialState , action) {\n  switch (action.type) {\n    case 'SET_ECHOES':\n      return setEchoes(state, action.echoes);\n\n    case 'POST_ECHO':\n      return postEcho(state, action.echo);\n  }\n  return state;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/state/reducer.js\n **/","import {fromJS, Map} from 'immutable';\n\nexport const initialState = Map();\n\nexport function setEchoes(state, echoes) {\n  return state.set('echoes', fromJS(echoes));\n}\n\nexport function postEcho(state, echo) {\n  console.log(\"hits postECHO core\");\n  const echoes = state.get('echoes');\n  return state.merge({\n    echoes: echoes.push(fromJS(echo))\n  })\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/state/core.js\n **/","module.exports = require(\"immutable\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"immutable\"\n ** module id = 39\n ** module chunks = 0\n **/","module.exports = require(\"socket.io\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"socket.io\"\n ** module id = 40\n ** module chunks = 0\n **/"],"sourceRoot":""}